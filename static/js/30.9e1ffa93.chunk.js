"use strict";(self.webpackChunkDiceAdventureDemo=self.webpackChunkDiceAdventureDemo||[]).push([[30],{7235:function(e,n,c){c.d(n,{k:function(){return m}});var t=c(9243),a="DiceIcon_dice__mzHqX",r="DiceIcon_icon__Rr08e",i="DiceIcon_physical__yV2lY",s="DiceIcon_magic__15Bfj",o="DiceIcon_elemental__B0alV",l="DiceIcon_trait__fPQ3I",d="DiceIcon_any__f-UYu",u="DiceIcon_notRolled__oeujV",_=c(3329),f=function(e){var n=e.value,c=e.type,t=void 0===n||-1===n?"".concat(u," "):"";switch(c){case"any":default:return"".concat(t).concat(d);case"physical":case"slashed":case"smashed":case"needle":return"".concat(t).concat(i);case"mana":case"magic":case"arcane":case"toxic":case"void":case"rainbow":return"".concat(t).concat(s);case"elemental":case"heat":case"ice":case"shock":case"poison":return"".concat(t).concat(o);case"trait":case"speed":case"strength":case"dexterity":case"perception":case"wits":case"stamina":return"".concat(t).concat(l)}},m=function(e){var n=e.value,c=e.diceMax,i=e.type;return(0,_.jsxs)("div",{className:"".concat(a," ").concat(f({value:n,type:i})),children:[n||c||" "," ",(0,_.jsx)("span",{className:r,children:(0,t.sp)(i)})]})}},4951:function(e,n,c){c.d(n,{u:function(){return k}});var t=c(1413),a=c(7762),r=c(5861),i=c(3433),s=c(9439),o=c(7757),l=c.n(o),d=c(7235),u=c(8664),_=c(4207),f=c(4880),m=c(7796),v=function(e,n){var c=JSON.parse(JSON.stringify(e)),a=[],r=n,i=!!(r&&Array.isArray(r)&&r.length>0)&&r,s=!!r&&r.filter((function(e){return e.selected})),o=!!(s&&Array.isArray(s)&&s.length>0)&&s,l=!!(c.dices&&Array.isArray(c.dices)&&c.dices.length>0)&&c.dices,d=function(){var e=[];if(c.dices.forEach((function(n){e.push(n)})),e.length>0)return a.push((function(){return(0,m.mN)(e)})),a.push((function(){return(0,_.fx)(c.id)})),a};if(l&&(c.disabled||c.fulfilled))return d(),a;var u=function(e,n){for(var c=!1,a=n.length;a>0;a--){var r=n[a-1];f.X.diceIsAllowed(e,r)&&(c=(0,t.Z)({},r),a=0)}return c};if(i){if(o){var v=u(c,o);return v?(a.push((function(){return(0,_.hm)({pieceId:c.id,dice:v})})),a.push((function(){return(0,m.fo)(v)})),console.log("Added ".concat(v.id," to ").concat(c.id)),a):a}var h=u(c,i);return h?(a.push((function(){return(0,_.hm)({pieceId:c.id,dice:h})})),a.push((function(){return(0,m.fo)(h)})),console.log("Added ".concat(h.id," to ").concat(c.id)),a):(d(),a)}return l?(d(),a):[]},h=c(2791),x=c(9434),p=c(984),y=c(5224),g=c(3329),k=function(e){var n=e.p,c=(0,x.I0)(),o=(0,p.TD)().rolledDices,_=(0,h.useState)([]),m=(0,s.Z)(_,2),k=m[0],Z=m[1],j=f.X.getDmgIcons(n),b=f.X.getReqIcons(n),D=n.weakness?n.weakness:[];return(0,h.useEffect)((function(){var e=function(){var e=(0,r.Z)(l().mark((function e(){var n,t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,a.Z)(k),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=9;break}return r=t.value,e.next=7,c(r());case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:Z([]);case 18:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();k.length>0&&e()}),[k,c]),(0,g.jsxs)("div",{className:"".concat(u.Z.piece," ").concat(n.fulfilled?u.Z.fulfilled:n.disabled?u.Z.disabled:u.Z.waiting),children:[(0,g.jsx)("div",{className:u.Z.leftHolder,children:D?D.map((function(e,c){return"any"===e?"":(0,g.jsx)(d.k,{type:e,value:""},"weaknessDiceType|".concat(n.id,"|").concat(e).concat(c))})):""}),(0,g.jsxs)("div",{className:u.Z.middleContainer,onClick:function(){Z((0,i.Z)(k.concat(v(n,o))))},children:[(0,g.jsx)("div",{className:u.Z.displayedBodyPart,children:n.bodyPartIcon}),(0,g.jsx)("div",{className:u.Z.diceHolder,children:n.dices?n.dices.map((function(e,n){return(0,h.createElement)(d.k,(0,t.Z)((0,t.Z)({},e),{},{key:"pieceDice|".concat(e.type,"|").concat(n)}))})):""}),(0,g.jsxs)("div",{className:u.Z.requiredHolder,children:[(0,g.jsx)("div",{className:u.Z.req}),b?b.map((function(e,c){return(0,h.createElement)(y.u,(0,t.Z)((0,t.Z)({},e),{},{key:"pieceIcon|".concat(n.id,"|").concat(c)}))})):""]})]}),(0,g.jsx)("div",{className:u.Z.damageHolder,children:j?j.map((function(e,c){return(0,g.jsx)("div",{className:u.Z.dmg,children:e},"".concat(n.id,"|dmgIcon|").concat(c))})):""})]})}},5224:function(e,n,c){c.d(n,{u:function(){return d}});var t="PieceIcon_dice__ZzvQe",a="PieceIcon_icon__g4BoE",r="PieceIcon_allowed__OR7Se",i="PieceIcon_neutral__gwSdE",s="PieceIcon_required__vrTY5",o=c(3329),l=function(e){var n=e.required,c=e.allowed;return n?s:c?r:i},d=function(e){var n=e.value,c=e.required,r=e.allowed;return(0,o.jsxs)("div",{className:"".concat(t," ").concat(l({required:c,allowed:r})),children:["".concat(n||" "),(0,o.jsx)("span",{className:a,children:" "})]})}},1564:function(e,n,c){c.d(n,{v:function(){return _}});var t="Miniature_miniature__-XChZ",a="Miniature_extended__Mo3l9",r="Miniature_extension__JEJLA",i="Miniature_padding__AvpVc",s="Miniature_textBoxContainer__VBOAB",o="Miniature_textBoxFront__YIyfd",l="Miniature_textBoxBack__b4yIz",d="Miniature_imgFrame__3V+X9",u=c(3329),_=function(e){var n=e.padding,c=void 0!==n&&n,_=e.bgTxtFront,f=void 0===_?"":_,m=e.bgTxtBack,v=void 0===m?"":m,h=e.children,x=e.bgColor,p=void 0===x?"#d7ca92":x;return(0,u.jsxs)("figure",{className:"".concat(t," ").concat(h?a:""),children:[(0,u.jsx)("div",{className:"".concat(d," ").concat(c?i:""," "),style:{backgroundColor:"".concat(p)},children:(0,u.jsxs)("div",{className:s,children:[(0,u.jsx)("div",{className:l,children:v}),(0,u.jsx)("div",{className:o,children:f})]})}),h?(0,u.jsxs)("div",{className:r,children:[" ",h]}):""]})}},8703:function(e,n,c){c.d(n,{Q:function(){return v}});var t=c(1413),a=c(3433),r=c(9434),i=c(4221),s=c(5459),o=c(9670),l=c(2639),d=c(9558),u=c(984),_=c(986),f="SkillList_list__0NNv7",m=c(3329),v=function(e){var n=e.filters,c=(0,r.v9)(i.mj),v=(0,u.wK)().dungeon,h=(0,r.I0)(),x=(0,r.v9)(d.bd),p=(0,u.TD)().combat;return(0,m.jsxs)("div",{className:f,children:[(0,r.v9)(i.NH)?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(l.a,{})}):"",x&&Array.isArray(x)?function(e,n){return n&&Array.isArray(n)?(0,a.Z)(n.filter((function(n){return!e.selected||n.selected===e.selected}))):n}(n||c,x).map((function(e,n){return(0,m.jsx)(s.i,{name:"".concat(e.name),alt:"".concat(e.alt),itemId:"".concat(e.itemId),index:n,selected:e.selected,skill:e.skill,currentUses:e.currentUses,success:_.U.usedDices(e.itemId,{combat:p,dungeon:v}),statsTxT:e.statsTxT||"",toggleSelect:function(){return h((0,o.$G)((0,t.Z)((0,t.Z)({},e),{},{selected:!e.selected})))},dices:e.dices,lv:e.lv},"".concat(e.name,"|").concat(e.index,"|").concat(e.id))})):""]})}},5459:function(e,n,c){c.d(n,{i:function(){return p}});var t=c(1413),a=c(7762),r=c(5861),i=c(3433),s=c(9439),o=c(7757),l=c.n(o),d=c(1564),u=c(7235),_={item:"SkillSquare_item__bxD12",canFire:"SkillSquare_canFire__YwXx-",skillButton:"SkillSquare_skillButton__6sBaz",bar:"SkillSquare_bar__HFaeU",text:"SkillSquare_text__k4BJE",name:"SkillSquare_name__thDuJ",iconBag:"SkillSquare_iconBag__c+K-+",disabled:"SkillSquare_disabled__L5kRC",spent:"SkillSquare_spent__cyghQ"},f=c(984),m=c(2791),v=c(9434),h=c(986),x=c(3329),p=function(e){var n=e.name,c=e.itemId,o=e.icon,p=e.alt,y=e.tags,g=void 0===y?[""]:y,k=e.success,Z=void 0!==k&&k,j=e.currentUses,b=void 0===j?-1:j,D=e.skill,N=void 0===D?{name:"NO SKILL",txt:"-",id:"skill|id",displayCost:[]}:D,I=(0,m.useState)([]),B=(0,s.Z)(I,2),E=B[0],S=B[1],w=(0,f.TD)(),C=w.inCombat,A=w.combat,q=(0,v.I0)();return(0,m.useEffect)((function(){var e=function(){var e=(0,r.Z)(l().mark((function e(n){var c,t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(0,a.Z)(n),e.prev=1,c.s();case 3:if((t=c.n()).done){e.next=10;break}if(!1===(r=t.value)){e.next=8;break}return e.next=8,q(r());case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),c.e(e.t0);case 15:return e.prev=15,c.f(),e.finish(15);case 18:S([]);case 19:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(n){return e.apply(this,arguments)}}();E.length>0&&e(E)}),[E,q]),(0,x.jsxs)("div",{className:"".concat(_.item," ").concat(!0!==C||b<0?_.display:Z?_.canFire:_.disabled," ").concat(!0===C&&0===b?_.spent:""),id:c,children:[(0,x.jsx)(d.v,{url:o,alt:p||n,bgTxtBack:g[0]}),(0,x.jsx)("div",{className:"".concat(_.skillButton," "),onClick:function(){Z&&0===E.length&&S((0,i.Z)(E.concat(h.U.execute(c,{combat:A},Z))))},children:p},"".concat(n,"btn").concat(c)),(0,x.jsxs)("div",{className:_.bar,children:[(0,x.jsx)("div",{className:_.iconBag,children:(N.displayCost?N.displayCost:[]).map((function(e,c){return(0,m.createElement)(u.k,(0,t.Z)((0,t.Z)({},e),{},{key:"".concat(n,"|").concat(e.type,"|").concat(c)}))}))}),(0,x.jsx)("div",{className:_.text,children:N.txt}),(0,x.jsx)("span",{className:_.name,children:N.name})]})]})}},986:function(e,n,c){c.d(n,{U:function(){return o}});var t=c(3433),a=c(3175),r=function(e){var n=e.itemId,c=function(e,n){if(!e)return[];var c=(0,a.Dl)(e)||[];return 0===c.length?[]:(0,t.Z)(c.map((function(e){var c=e[0]||{false:function(){return!1}},t=e.length>0&&e[1]||!1,a=e.length>1&&e[2]||{};return function(){return c[t]({params:a,state:n})}})))}(n,e.state);return!(c.length<1)&&(console.log("Skill evaluations for:",n,c),c)},i=c(7796),s=c(7492),o={usedDices:function(e,n){var c=n.dungeon||!1,a=c&&c.items||!1,i=!!a&&a.find((function(n){return n.itemId===e}));if((i&&i.currentUses||0)<1)return!1;var s=r({itemId:e,state:n});if(!s)return console.log("".concat(e," had no evaluations to perform")),!1;for(var o=(0,t.Z)(s),l=!0,d=0;l&&d<o.length;){var u=o[d]();void 0===u||!1===u?l=!1:!0!==u&&(l=!0!==l&&!1!==l?[].concat((0,t.Z)(l),(0,t.Z)(u)):(0,t.Z)(u)),d++}return d!==o.length&&(l=!1),l},execute:function(e,n,c){var r=(0,t.Z)(c.map((function(e){return function(e,n){return n.find((function(n){return n.id===e}))||{}}(e,n.combat.rolledDices)})));console.log("Skill.EXECUTE > usedDices, diceIdArr",r,c);var o=function(e){var n=e.itemId,c=e.state,r=e.usedDices;if(!n)return[];var i=(0,a.cL)(n)||[];if(0===i.length)return[];var s=(0,t.Z)(i.map((function(e){var n=e[0]||{false:function(){return!1}},t=e.length>0&&e[1]||!1,a=e.length>1&&e[2]||{};return function(){return n[t]({params:a,state:c,usedDices:r})}})));return!(s.length<1)&&(console.log("data> skillExecs > SkillExecs for:",n,s),s)}({itemId:e,state:n,usedDices:r});if(!o)return console.log("".concat(e," had no actions to execute")),!1;for(var l=(0,t.Z)(o),d=!0,u=0;d&&u<l.length;){var _=l[u]();void 0===_||!1===_?d=!1:!0!==_&&(d=!0!==d&&!1!==d?[].concat((0,t.Z)(d),(0,t.Z)(_)):(0,t.Z)(_)),u++}return d=u===l.length&&(!0!==d&&!1!==d?[].concat((0,t.Z)(d),[i.EC,function(){return(0,s.IZ)(e)}]):[i.EC,function(){return(0,s.IZ)(e)}])}}},3030:function(e,n,c){c.r(n),c.d(n,{CombatPage:function(){return R},default:function(){return T}});var t=c(7689),a=c(9434),r=c(35),i=c(2093),s=c(984),o=c(1413),l=c(4951),d=c(8664),u=c(6150),_=c(3329),f=function(){var e=(0,u.j)().body,n=e||[];return(0,_.jsx)("div",{className:d.Z.body,children:n.map((function(e,n){return(0,_.jsx)(l.u,{p:(0,o.Z)({},e)},"piece|".concat(n,"|").concat(e.id))}))})},m=c(8703),v=c(9243),h="RolledDice_dice__Xm1fU",x="RolledDice_diceMaxCover__W6mKr",p="RolledDice_icon__8Q1v9",y="RolledDice_physical__P4A2k",g="RolledDice_magic__X8wHj",k="RolledDice_elemental__TF1bg",Z="RolledDice_trait__A5TtY",j="RolledDice_any__UQyUn",b="RolledDice_notRolled__M8zvO",D="RolledDice_selected__yikHW",N=c(7796),I=function(e){var n=e.value,c=e.type,t=n&&-1!==n?"":"".concat(b," ");switch(c){case"any":default:return"".concat(t).concat(j);case"physical":case"slashed":case"smashed":case"needle":return"".concat(t).concat(y);case"mana":case"magic":case"arcane":case"toxic":case"void":case"rainbow":return"".concat(t).concat(g);case"elemental":case"heat":case"ice":case"shock":case"poison":return"".concat(t).concat(k);case"speed":case"strength":case"dexterity":case"perception":case"wits":case"stamina":return"".concat(t).concat(Z)}},B=function(e){var n=e.value,c=e.diceMax,t=e.type,r=e.selected,i=e.id,s=(0,a.I0)();return(0,_.jsxs)("div",{className:"".concat(h," ").concat(I({value:n,diceMax:c,type:t})," ").concat(r?D:""),onClick:function(){s((0,N.cV)(i))},children:[n||c||"?"," ",(0,_.jsx)("span",{className:p,children:(0,v.sp)(t)}),(0,_.jsx)("div",{className:x,children:c})]})},E="RolledDiceBag_diceBag__OEjoy",S=c(2791),w=function(){var e=(0,s.TD)().rolledDices;return(0,_.jsx)("div",{className:E,children:(e||[]).map((function(e,n){return(0,S.createElement)(B,(0,o.Z)((0,o.Z)({},e),{},{key:"rolledDice|".concat(e.type,"|").concat(n)}))}))})},C=c(5707),A=c(9558),q=c(1486),H=c(2639),R=function(){var e=(0,s.TD)().inCombat,n=(0,a.v9)(r.DC),c=(0,a.v9)(C.E4),o=(0,a.v9)(A.NH),l=(0,a.v9)(q.NH);return"summary"===e?(0,_.jsx)(t.Fg,{to:"/summary"}):o||l?(0,_.jsx)(H.a,{}):(0,_.jsxs)("main",{className:i.Z.main,children:[n?(0,_.jsx)("span",{className:i.Z.error,children:n}):"",e?c<1?(0,_.jsx)(t.Fg,{to:"/return"}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f,{}),(0,_.jsx)(w,{}),(0,_.jsx)(m.Q,{})]}):(0,_.jsx)(t.Fg,{to:"/dungeon"})]})},T=R},8664:function(e,n){n.Z={body:"EnemyBody_body__SNMRT",piece:"EnemyBody_piece__m6sgA",middleContainer:"EnemyBody_middleContainer__tatOZ",displayedBodyPart:"EnemyBody_displayedBodyPart__94tgg",leftHolder:"EnemyBody_leftHolder__mO2A4",damageHolder:"EnemyBody_damageHolder__veb4+",modifier:"EnemyBody_modifier__KoRSl",x2:"EnemyBody_x2__fVl44",requiredHolder:"EnemyBody_requiredHolder__6QNCW",diceHolder:"EnemyBody_diceHolder__+wfoq",dmg:"EnemyBody_dmg__ECDC4",disabled:"EnemyBody_disabled__aLzAg",fulfilled:"EnemyBody_fulfilled__vmh42",waiting:"EnemyBody_waiting__XT6PA"}}}]);
//# sourceMappingURL=30.9e1ffa93.chunk.js.map